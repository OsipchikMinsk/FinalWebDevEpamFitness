CREATE TABLE `gym`.`user` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  `SURNAME` VARCHAR(45) NULL,
  `EMAIL` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC) VISIBLE,
  UNIQUE INDEX `EMAIL_UNIQUE` (`EMAIL` ASC) VISIBLE);

CREATE TABLE `gym`.`abonement_type` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  `PRICE` INT NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC) VISIBLE);

CREATE TABLE `gym`.`abonement` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `USER_ID` INT NULL,
  `TYPE_ID` INT NULL,
  `START_DATE` DATE NULL,
  `FINISH_DATE` DATE NULL,
  `ORDER_DATE` DATE NULL,
  `TOTAL_PRICE` DECIMAL NULL,
  PRIMARY KEY (`ID`),
  INDEX `abonement_user_id_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `abonement_type_id_idx` (`TYPE_ID` ASC) VISIBLE,
  CONSTRAINT `abonement_user_id`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `gym`.`user` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `abonement_type_id`
    FOREIGN KEY (`TYPE_ID`)
    REFERENCES `gym`.`abonement_type` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE `gym`.`exercise` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `idexercise_UNIQUE` (`ID` ASC) VISIBLE,
  UNIQUE INDEX `NAME_UNIQUE` (`NAME` ASC) VISIBLE);

CREATE TABLE `gym`.`comment` (
  `ID` INT NOT NULL,
  `USER_ID` INT NULL,
  `DESCRIPTION` LONGTEXT NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC) VISIBLE,
  INDEX `comment_user_id_idx` (`USER_ID` ASC) VISIBLE,
  CONSTRAINT `comment_user_id`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `gym`.`user` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE `gym`.`user_exercise` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `EXECUTION_DATE` DATE NULL,
  `APPROVED` TINYINT NULL,
  `DONE` TINYINT NULL,
  `EXERCISE_ID` INT NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `iduser_excercise_UNIQUE` (`ID` ASC) VISIBLE,
  INDEX `user_exercise_id_idx` (`EXERCISE_ID` ASC) VISIBLE,
  CONSTRAINT `user_exercise_id`
    FOREIGN KEY (`EXERCISE_ID`)
    REFERENCES `gym`.`exercise` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE `gym`.`abonement_type_exercise` (
  `ABONEMENT_TYPE_ID` INT NOT NULL,
  `EXERCISE_ID` INT NOT NULL,
  INDEX `abonement_type_id_idx` (`ABONEMENT_TYPE_ID` ASC) VISIBLE,
  INDEX `exercise_id_idx` (`EXERCISE_ID` ASC) VISIBLE,
  CONSTRAINT `exersize_abonement_type_id`
    FOREIGN KEY (`ABONEMENT_TYPE_ID`)
    REFERENCES `gym`.`abonement_type` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `abonement_type_exercise_id`
    FOREIGN KEY (`EXERCISE_ID`)
    REFERENCES `gym`.`exercise` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE `gym`.`role` (
  `ID` INT NOT NULL AUTO_INCREMENT,
  `NAME` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC) VISIBLE);

CREATE TABLE `gym`.`user_role` (
  `USER_ID` INT NOT NULL,
  `ROLE_ID` INT NOT NULL,
  INDEX `role_user_id_idx` (`USER_ID` ASC) VISIBLE,
  INDEX `role_role_id_idx` (`ROLE_ID` ASC) VISIBLE,
  CONSTRAINT `role_user_id`
    FOREIGN KEY (`USER_ID`)
    REFERENCES `gym`.`user` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `role_role_id`
    FOREIGN KEY (`ROLE_ID`)
    REFERENCES `gym`.`role` (`ID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION);

CREATE TABLE `gym`.`wallet` (
  `ID` INT NOT NULL,
  `AMOUNT` DECIMAL NULL,
  PRIMARY KEY (`ID`),
  UNIQUE INDEX `ID_UNIQUE` (`ID` ASC) VISIBLE);

CREATE TABLE `gym`.`user_password` (
    `user_id` INT NOT NULL,
    `password` VARCHAR(255) NULL,
    INDEX `pass_user_id_idx` (`user_id` ASC) VISIBLE,
    CONSTRAINT `pass_user_id`
      FOREIGN KEY (`user_id`)
      REFERENCES `gym`.`user` (`ID`)
      ON DELETE NO ACTION
      ON UPDATE NO ACTION);
